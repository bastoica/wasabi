## Remove non UTF-8 characters
sed -r "s/\x1B\[[0-9;]*[a-zA-Z]//g" [FILE]

## Run Hadoop HDFS sub-set of failing tests

mvn -Dtest=TestBalancerService,TestBalancerWithHANameNodes,TestCheckpoint,TestConsistentReadsObserver,TestCryptoAdminCLI,TestDisableNameservices,TestDiskspaceQuotaUpdate,TestErasureCodingPoliciesWithRandomECPolicy,TestFileLengthOnClusterRestart,TestFsVolumeList,TestHttpFSAccessControlled,TestHttpFSFileSystemLocalFileSystem,TestHttpFSFWithSWebhdfsFileSystem,TestHttpFSFWithWebhdfsFileSystem,TestHttpFSServer,TestHttpFSServerNoACLs,TestHttpFSServerNoXAttrs,TestHttpFSServerWebServer,TestHttpFSWithHttpFSFileSystem,TestMultiObserverNode,TestNameNodeMXBean,TestNameserviceRPCMetrics,TestObserverNode,TestOfflineImageViewer,TestOfflineImageViewerForAcl,TestOfflineImageViewerForContentSummary,TestOfflineImageViewerForXAttr,TestPipelinesFailover,TestReconstructStripedFileWithRandomECPolicy,TestReconstructStripedFileWithValidator,TestReencryption,TestRenewLeaseWithSameINodeId,TestRouterAllResolver,TestRouterClientMetrics,TestRouterFederationRename,TestRouterFederationRenameInKerberosEnv,TestRouterFederationRenamePermission,TestRouterFsck,TestRouterHandlersFairness,TestRouterHDFSContractAppend,TestRouterHDFSContractAppendSecure,TestRouterHDFSContractConcat,TestRouterHDFSContractConcatSecure,TestRouterHDFSContractCreate,TestRouterHDFSContractCreateSecure,TestRouterHDFSContractDelegationToken,TestRouterHDFSContractDelete,TestRouterHDFSContractDeleteSecure,TestRouterHDFSContractGetFileStatus,TestRouterHDFSContractGetFileStatusSecure,TestRouterHDFSContractMkdir,TestRouterHDFSContractMkdirSecure,TestRouterHDFSContractOpen,TestRouterHDFSContractOpenSecure,TestRouterHDFSContractRename,TestRouterHDFSContractRenameSecure,TestRouterHDFSContractRootDirectory,TestRouterHDFSContractRootDirectorySecure,TestRouterHDFSContractSeek,TestRouterHDFSContractSeekSecure,TestRouterHDFSContractSetTimes,TestRouterHDFSContractSetTimesSecure,TestRouterHttpDelegationToken,TestRouterMissingFolderMulti,TestRouterMountTable,TestRouterMountTableWithoutDefaultNS,TestRouterMultiRack,TestRouterNamenodeHeartbeat,TestRouterNamenodeMonitoring,TestRouterNetworkTopologyServlet,TestRouterQuota,TestRouterRetryCache,TestRouterRpc,TestRouterRPCClientRetries,TestRouterRpcMultiDestination,TestRouterRPCMultipleDestinationMountTableResolver,TestRouterRpcSingleNS,TestRouterRpcStoragePolicySatisfier,TestRouterTrash,TestRouterWebHDFSContractAppend,TestRouterWebHDFSContractConcat,TestRouterWebHDFSContractCreate,TestRouterWebHDFSContractDelete,TestRouterWebHDFSContractMkdir,TestRouterWebHDFSContractOpen,TestRouterWebHDFSContractRename,TestRouterWebHDFSContractRootDirectory,TestRouterWebHDFSContractSeek,TestRouterWebHdfsMethods,TestSafeMode,TestSnapshotDeletion,TestWebHdfsContentLength,TestWebHdfsTimeouts -Dparallel-tests -DtestsThreadCount=16 clean test 2>&1 | tee hdfs-tests-1fault.log
